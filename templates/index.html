<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sudoku Solver</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,700&display=swap" rel="stylesheet">
</head>
<body>
    <h1>Sudoku Solver</h1>
    <div class="sudoku-container">
        <div class="sudoku-grid" id="sudoku-grid">
            <!-- Grid will be generated by JS -->
        </div>
        <button class="solve-btn" onclick="solveSudoku()">Solve</button>
    </div>
    <script>
        // Generate the grid
        const grid = document.getElementById('sudoku-grid');
        for (let i = 0; i < 9; i++) {
            for (let j = 0; j < 9; j++) {
                let input = document.createElement('input');
                input.type = 'number';
                input.min = 1;
                input.max = 9;
                input.className = 'sudoku-cell';
                input.id = `cell-${i}-${j}`;
                grid.appendChild(input);
            }
        }

        function getBoard() {
            let board = [];
            for (let i = 0; i < 9; i++) {
                let row = [];
                for (let j = 0; j < 9; j++) {
                    let val = document.getElementById(`cell-${i}-${j}`).value;
                    row.push(val ? parseInt(val) : 0);
                }
                board.push(row);
            }
            return board;
        }

        function setBoard(board) {
            for (let i = 0; i < 9; i++) {
                for (let j = 0; j < 9; j++) {
                    document.getElementById(`cell-${i}-${j}`).value = board[i][j] !== 0 ? board[i][j] : '';
                }
            }
        }

        async function solveSudoku() {
            const board = getBoard();
            const response = await fetch('/solve', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({board})
            });
            const data = await response.json();
            if (response.ok) {
                setBoard(data.solution);
            } else {
                alert(data.error);
            }
        }
    </script>
</body>
</html>
